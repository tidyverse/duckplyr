<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>duckplyr data frames — duckdb_tibble • duckplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="duckplyr data frames — duckdb_tibble"><meta name="description" content='Data frames backed by duckplyr have a special class, "duckplyr_df",
in addition to the default classes.
This ensures that dplyr methods are dispatched correctly.
For such objects,
dplyr verbs such as dplyr::mutate(), dplyr::select() or dplyr::filter()  will use DuckDB.
duckdb_tibble() works like tibble::tibble(), returning an "eager" duckplyr data frame by default.
See the "Eager and lazy" section below.
as_duckdb_tibble() converts a data frame or a dplyr lazy table to a duckplyr data frame.
This is a generic function that can be overridden for custom classes.
is_duckdb_tibble() returns TRUE if x is a duckplyr data frame.'><meta property="og:description" content='Data frames backed by duckplyr have a special class, "duckplyr_df",
in addition to the default classes.
This ensures that dplyr methods are dispatched correctly.
For such objects,
dplyr verbs such as dplyr::mutate(), dplyr::select() or dplyr::filter()  will use DuckDB.
duckdb_tibble() works like tibble::tibble(), returning an "eager" duckplyr data frame by default.
See the "Eager and lazy" section below.
as_duckdb_tibble() converts a data frame or a dplyr lazy table to a duckplyr data frame.
This is a generic function that can be overridden for custom classes.
is_duckdb_tibble() returns TRUE if x is a duckplyr data frame.'><meta property="og:image" content="https://duckplyr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="duckplyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">duckplyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.99.99.9918</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/developers.html">Use of duckplyr in other packages</a></li>
    <li><a class="dropdown-item" href="../articles/limits.html">Translations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/duckplyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>duckplyr data frames</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/duckplyr/blob/main/R/ducktbl.R" class="external-link"><code>R/ducktbl.R</code></a></small>
      <div class="d-none name"><code>duckdb_tibble.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Data frames backed by duckplyr have a special class, <code>"duckplyr_df"</code>,
in addition to the default classes.
This ensures that dplyr methods are dispatched correctly.
For such objects,
dplyr verbs such as <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code>  will use DuckDB.</p>
<p><code>duckdb_tibble()</code> works like <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code>, returning an "eager" duckplyr data frame by default.
See the "Eager and lazy" section below.</p>
<p><code>as_duckdb_tibble()</code> converts a data frame or a dplyr lazy table to a duckplyr data frame.
This is a generic function that can be overridden for custom classes.</p>
<p><code>is_duckdb_tibble()</code> returns <code>TRUE</code> if <code>x</code> is a duckplyr data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">duckdb_tibble</span><span class="op">(</span><span class="va">...</span>, .lazy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_duckdb_tibble</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, .lazy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_duckdb_tibble</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>For <code>duckdb_tibble()</code>, passed on to <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code>.
For <code>as_duckdb_tibble()</code>, passed on to methods.</p></dd>


<dt id="arg--lazy">.lazy<a class="anchor" aria-label="anchor" href="#arg--lazy"></a></dt>
<dd><p>Logical, whether to create a lazy duckplyr frame.
See the section "Eager and lazy" for details.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>The object to convert or to test.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>duckdb_tibble()</code> and <code>as_duckdb_tibble()</code>, an object with the following classes:</p><ul><li><p><code>"lazy_duckplyr_df"</code> if <code>.lazy</code> is <code>TRUE</code></p></li>
<li><p><code>"duckplyr_df"</code></p></li>
<li><p>Classes of a <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></p></li>
</ul><p>For <code>is_duckdb_tibble()</code>, a scalar logical.</p>
    </div>
    <div class="section level2">
    <h2 id="eager-and-lazy">Eager and lazy<a class="anchor" aria-label="anchor" href="#eager-and-lazy"></a></h2>


<p>Data frames backed by duckplyr behave as regular data frames in almost all respects.
In particular, direct column access like <code>df$x</code>,
or retrieving the number of rows with <code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow()</a></code>, works identically.
For a duckplyr frame that is the result of a dplyr operation,
accessing column data or retrieving the number of rows will trigger a computation
that is carried out by DuckDB.</p>
<p>Eager and lazy duckplyr frames differ in their behavior for column access and row count.
For eager duckplyr frames, the underlying DuckDB computation is carried out
upon the first request.
Once the results are computed, they are cached and subsequent requests are fast.
This is a good choice for small to medium-sized data,
where DuckDB can provide a nice speedup but materializing the data is affordable.
This is the default for <code>duckdb_tibble()</code> and <code>as_duckdb_tibble()</code>.
Use <code>.lazy = TRUE</code> for these functions to check
that all operations are supported by DuckDB.</p>
<p>For lazy duckplyr frames, accessing a column or requesting the number of rows
triggers an error.
This is a good choice for large data sets where the cost of materializing the data
may be prohibitive due to size or computation time,
and the user wants to control when the computation is carried out.
This is the default for the ingestion functions like <code><a href="read_file_duckdb.html">read_parquet_duckdb()</a></code>.
It is safe to use <code>read_parquet_duckdb(lazy = FALSE)</code>
if the data is small enough to be materialized at any stage.</p>
<p>A lazy duckplyr frame can be converted to an eager one with <code>as_duckdb_tibble(.lazy = FALSE)</code>.
The <code><a href="collect.duckplyr_df.html">collect.duckplyr_df()</a></code> method converts to a plain tibble.
Other useful methods include <code><a href="compute_file.html">compute_file()</a></code> for storing results in a file,
and <code><a href="compute.duckplyr_df.html">compute.duckplyr_df()</a></code> for storing results in temporary storage on disk.</p>
<p>Computing via DuckDB is not always possible,
see <code><a href="../articles/limits.html">vignette("limits")</a></code> for the supported operations.
In such cases, the original dplyr implementation is used, see <a href="fallback.html">fallback</a> for details.
As the original dplyr implementation accesses columns directly,
the data must be materialized before a fallback can be executed.
This means that automatic fallback is only possible for "eager" duckplyr frames,
while for "lazy" duckplyr frames, one of the aforementioned methods must be used.</p>
<p>The concept of lazy tables is also known from dbplyr,
but "eager" tables are not available there at the time of writing,
and the data must always be brought into R memory through <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">dplyr::collect()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">duckdb_tibble</span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A duckplyr data frame: 1 variable</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A duckplyr data frame: 2 variables</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       a     b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1     2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">$</span><span class="va">a</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">duckdb_tibble</span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, .lazy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A duckplyr data frame: 1 variable</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">a</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Materialization is disabled, use collect() or as_tibble() to materialize</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">$</span><span class="va">a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hannes.muehleisen.org/" class="external-link">Hannes Mühleisen</a>, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

  </div></footer></body></html>

