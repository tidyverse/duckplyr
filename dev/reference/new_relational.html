<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Relational implementer's interface — new_relational • duckplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Relational implementer's interface — new_relational"><meta name="description" content="The constructor and generics described here define a class
that helps separating dplyr's user interface from the actual underlying operations.
In the longer term, this will help packages that implement the dplyr interface
(such as dbplyr, dtplyr, arrow and similar)
to focus on the core details of their functionality,
rather than on the intricacies of dplyr's user interface.
new_relational() constructs an object of class &quot;relational&quot;.
Users are encouraged to provide the class argument.
The typical use case will be to create a wrapper function.
rel_to_df() extracts a data frame representation from a relational object,
to be used by dplyr::collect().
rel_filter() keeps rows that match a predicate,
to be used by dplyr::filter().
rel_project() selects columns or creates new columns,
to be used by dplyr::select(), dplyr::rename(),
dplyr::mutate(), dplyr::relocate(), and others.
rel_aggregate() combines several rows into one,
to be used by dplyr::summarize().
rel_order() reorders rows by columns or expressions,
to be used by dplyr::arrange().
rel_join() joins or merges two tables,
to be used by dplyr::left_join(), dplyr::right_join(),
dplyr::inner_join(), dplyr::full_join(), dplyr::cross_join(),
dplyr::semi_join(), and dplyr::anti_join().
rel_limit() limits the number of rows in a table,
to be used by utils::head().
rel_distinct() only keeps the distinct rows in a table,
to be used by dplyr::distinct().
rel_set_intersect() returns rows present in both tables,
to be used by intersect().
rel_set_diff() returns rows present in any of both tables,
to be used by setdiff().
rel_set_symdiff() returns rows present in any of both tables,
to be used by dplyr::symdiff().
rel_union_all() returns rows present in any of both tables,
to be used by dplyr::union_all().
rel_explain() prints an explanation of the plan
executed by the relational object.
rel_alias() returns the alias name for a relational object.
rel_set_alias() sets the alias name for a relational object.
rel_names() returns the column names as character vector,
to be used by colnames()."><meta property="og:description" content="The constructor and generics described here define a class
that helps separating dplyr's user interface from the actual underlying operations.
In the longer term, this will help packages that implement the dplyr interface
(such as dbplyr, dtplyr, arrow and similar)
to focus on the core details of their functionality,
rather than on the intricacies of dplyr's user interface.
new_relational() constructs an object of class &quot;relational&quot;.
Users are encouraged to provide the class argument.
The typical use case will be to create a wrapper function.
rel_to_df() extracts a data frame representation from a relational object,
to be used by dplyr::collect().
rel_filter() keeps rows that match a predicate,
to be used by dplyr::filter().
rel_project() selects columns or creates new columns,
to be used by dplyr::select(), dplyr::rename(),
dplyr::mutate(), dplyr::relocate(), and others.
rel_aggregate() combines several rows into one,
to be used by dplyr::summarize().
rel_order() reorders rows by columns or expressions,
to be used by dplyr::arrange().
rel_join() joins or merges two tables,
to be used by dplyr::left_join(), dplyr::right_join(),
dplyr::inner_join(), dplyr::full_join(), dplyr::cross_join(),
dplyr::semi_join(), and dplyr::anti_join().
rel_limit() limits the number of rows in a table,
to be used by utils::head().
rel_distinct() only keeps the distinct rows in a table,
to be used by dplyr::distinct().
rel_set_intersect() returns rows present in both tables,
to be used by intersect().
rel_set_diff() returns rows present in any of both tables,
to be used by setdiff().
rel_set_symdiff() returns rows present in any of both tables,
to be used by dplyr::symdiff().
rel_union_all() returns rows present in any of both tables,
to be used by dplyr::union_all().
rel_explain() prints an explanation of the plan
executed by the relational object.
rel_alias() returns the alias name for a relational object.
rel_set_alias() sets the alias name for a relational object.
rel_names() returns the column names as character vector,
to be used by colnames()."><meta property="og:image" content="https://duckplyr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="duckplyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">duckplyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.1.9006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/developers.html">Use of duckplyr in other packages</a></li>
    <li><a class="dropdown-item" href="../articles/limits.html">Translations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/duckplyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Relational implementer's interface</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/duckplyr/blob/main/R/relational-rel.R" class="external-link"><code>R/relational-rel.R</code></a></small>
      <div class="d-none name"><code>new_relational.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The constructor and generics described here define a class
that helps separating dplyr's user interface from the actual underlying operations.
In the longer term, this will help packages that implement the dplyr interface
(such as <span class="pkg">dbplyr</span>, <span class="pkg">dtplyr</span>, <span class="pkg">arrow</span> and similar)
to focus on the core details of their functionality,
rather than on the intricacies of dplyr's user interface.</p>
<p><code>new_relational()</code> constructs an object of class <code>"relational"</code>.
Users are encouraged to provide the <code>class</code> argument.
The typical use case will be to create a wrapper function.</p>
<p><code>rel_to_df()</code> extracts a data frame representation from a relational object,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">dplyr::collect()</a></code>.</p>
<p><code>rel_filter()</code> keeps rows that match a predicate,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code>.</p>
<p><code>rel_project()</code> selects columns or creates new columns,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">dplyr::relocate()</a></code>, and others.</p>
<p><code>rel_aggregate()</code> combines several rows into one,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarize()</a></code>.</p>
<p><code>rel_order()</code> reorders rows by columns or expressions,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code>.</p>
<p><code>rel_join()</code> joins or merges two tables,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::right_join()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::inner_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::full_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/cross_join.html" class="external-link">dplyr::cross_join()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">dplyr::semi_join()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">dplyr::anti_join()</a></code>.</p>
<p><code>rel_limit()</code> limits the number of rows in a table,
to be used by <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">utils::head()</a></code>.</p>
<p><code>rel_distinct()</code> only keeps the distinct rows in a table,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">dplyr::distinct()</a></code>.</p>
<p><code>rel_set_intersect()</code> returns rows present in both tables,
to be used by <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">intersect()</a></code>.</p>
<p><code>rel_set_diff()</code> returns rows present in any of both tables,
to be used by <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code>.</p>
<p><code>rel_set_symdiff()</code> returns rows present in any of both tables,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/setops.html" class="external-link">dplyr::symdiff()</a></code>.</p>
<p><code>rel_union_all()</code> returns rows present in any of both tables,
to be used by <code><a href="https://dplyr.tidyverse.org/reference/setops.html" class="external-link">dplyr::union_all()</a></code>.</p>
<p><code>rel_explain()</code> prints an explanation of the plan
executed by the relational object.</p>
<p><code>rel_alias()</code> returns the alias name for a relational object.</p>
<p><code>rel_set_alias()</code> sets the alias name for a relational object.</p>
<p><code>rel_names()</code> returns the column names as character vector,
to be used by <code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_relational</span><span class="op">(</span><span class="va">...</span>, class <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_to_df</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_filter</span><span class="op">(</span><span class="va">rel</span>, <span class="va">exprs</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_project</span><span class="op">(</span><span class="va">rel</span>, <span class="va">exprs</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_aggregate</span><span class="op">(</span><span class="va">rel</span>, <span class="va">groups</span>, <span class="va">aggregates</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_order</span><span class="op">(</span><span class="va">rel</span>, <span class="va">orders</span>, <span class="va">ascending</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_join</span><span class="op">(</span></span>
<span>  <span class="va">left</span>,</span>
<span>  <span class="va">right</span>,</span>
<span>  <span class="va">conds</span>,</span>
<span>  join <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"inner"</span>, <span class="st">"left"</span>, <span class="st">"right"</span>, <span class="st">"outer"</span>, <span class="st">"cross"</span>, <span class="st">"semi"</span>, <span class="st">"anti"</span><span class="op">)</span>,</span>
<span>  join_ref_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"regular"</span>, <span class="st">"natural"</span>, <span class="st">"cross"</span>, <span class="st">"positional"</span>, <span class="st">"asof"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_limit</span><span class="op">(</span><span class="va">rel</span>, <span class="va">n</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_distinct</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_set_intersect</span><span class="op">(</span><span class="va">rel_a</span>, <span class="va">rel_b</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_set_diff</span><span class="op">(</span><span class="va">rel_a</span>, <span class="va">rel_b</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_set_symdiff</span><span class="op">(</span><span class="va">rel_a</span>, <span class="va">rel_b</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_union_all</span><span class="op">(</span><span class="va">rel_a</span>, <span class="va">rel_b</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_explain</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_alias</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_set_alias</span><span class="op">(</span><span class="va">rel</span>, <span class="va">alias</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rel_names</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Reserved for future extensions, must be empty.</p></dd>


<dt id="arg-class">class<a class="anchor" aria-label="anchor" href="#arg-class"></a></dt>
<dd><p>Classes added in front of the <code>"relational"</code> base class.</p></dd>


<dt id="arg-rel-rel-a-rel-b-left-right">rel, rel_a, rel_b, left, right<a class="anchor" aria-label="anchor" href="#arg-rel-rel-a-rel-b-left-right"></a></dt>
<dd><p>A relational object.</p></dd>


<dt id="arg-exprs">exprs<a class="anchor" aria-label="anchor" href="#arg-exprs"></a></dt>
<dd><p>A list of <code>"relational_relexpr"</code> objects to filter by,
created by <code><a href="new_relexpr.html">new_relexpr()</a></code>.</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>A list of expressions to group by.</p></dd>


<dt id="arg-aggregates">aggregates<a class="anchor" aria-label="anchor" href="#arg-aggregates"></a></dt>
<dd><p>A list of expressions with aggregates to compute.</p></dd>


<dt id="arg-orders">orders<a class="anchor" aria-label="anchor" href="#arg-orders"></a></dt>
<dd><p>A list of expressions to order by.</p></dd>


<dt id="arg-ascending">ascending<a class="anchor" aria-label="anchor" href="#arg-ascending"></a></dt>
<dd><p>A logical vector describing the sort order.</p></dd>


<dt id="arg-conds">conds<a class="anchor" aria-label="anchor" href="#arg-conds"></a></dt>
<dd><p>A list of expressions to use for the join.</p></dd>


<dt id="arg-join">join<a class="anchor" aria-label="anchor" href="#arg-join"></a></dt>
<dd><p>The type of join.</p></dd>


<dt id="arg-join-ref-type">join_ref_type<a class="anchor" aria-label="anchor" href="#arg-join-ref-type"></a></dt>
<dd><p>The ref type of join.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The number of rows.</p></dd>


<dt id="arg-alias">alias<a class="anchor" aria-label="anchor" href="#arg-alias"></a></dt>
<dd><p>the new alias</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p><code>new_relational()</code> returns a new relational object.</p></li>
<li><p><code>rel_to_df()</code> returns a data frame.</p></li>
<li><p><code>rel_names()</code> returns a character vector.</p></li>
<li><p>All other generics return a modified relational object.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">new_dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">is.data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">new_relational</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"dfrel"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">mtcars_rel</span> <span class="op">&lt;-</span> <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_to_df.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">rel_to_df</span><span class="op">(</span><span class="va">mtcars_rel</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_filter.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">exprs</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># A real implementation would evaluate the predicates defined</span></span></span>
<span class="r-in"><span>  <span class="co"># by the exprs argument</span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_filter</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mtcars_rel</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="new_relexpr.html">relexpr_function</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"gt"</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="new_relexpr.html">relexpr_reference</a></span><span class="op">(</span><span class="st">"cyl"</span><span class="op">)</span>, <span class="fu"><a href="new_relexpr.html">relexpr_constant</a></span><span class="op">(</span><span class="st">"6"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4     21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag 21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710    22.8   4  108  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_project.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">exprs</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># A real implementation would evaluate the expressions defined</span></span></span>
<span class="r-in"><span>  <span class="co"># by the exprs argument</span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_project</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mtcars_rel</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="new_relexpr.html">relexpr_reference</a></span><span class="op">(</span><span class="st">"cyl"</span><span class="op">)</span>, <span class="fu"><a href="new_relexpr.html">relexpr_reference</a></span><span class="op">(</span><span class="st">"disp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_order.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">exprs</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># A real implementation would evaluate the expressions defined</span></span></span>
<span class="r-in"><span>  <span class="co"># by the exprs argument</span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">df</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mtcars_rel</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="new_relexpr.html">relexpr_reference</a></span><span class="op">(</span><span class="st">"mpg"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span><span class="va">rel_join.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">left</span>, <span class="va">right</span>, <span class="va">conds</span>, <span class="va">join</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">left_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">left</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">right_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">right</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># A real implementation would evaluate the expressions</span></span></span>
<span class="r-in"><span>  <span class="co"># defined by the conds argument,</span></span></span>
<span class="r-in"><span>  <span class="co"># use different join types based on the join argument,</span></span></span>
<span class="r-in"><span>  <span class="co"># and implement the join itself instead of relaying to left_join().</span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">left_df</span>, <span class="va">right_df</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_join</span><span class="op">(</span><span class="fu">new_dfrel</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="fl">21</span><span class="op">)</span><span class="op">)</span>, <span class="va">mtcars_rel</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(mpg)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  21   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  21   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_limit.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">n</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_limit</span><span class="op">(</span><span class="va">mtcars_rel</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4     21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag 21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710    22.8   4  108  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_distinct.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">new_dfrel</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_distinct</span><span class="op">(</span><span class="fu">new_dfrel</span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             mpg cyl disp  hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4  21.0   6  160 110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710 22.8   4  108  93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dfrel"      "relational"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rel_names.dfrel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rel</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">rel</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rel_names</span><span class="op">(</span><span class="va">mtcars_rel</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mpg"  "cyl"  "disp" "hp"  </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hannes.muehleisen.org/" class="external-link">Hannes Mühleisen</a>, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

  </div></footer></body></html>

